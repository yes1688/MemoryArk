# MemoryArk 2.0 測試環境配置

# 應用配置
APP_NAME=memoryark-staging
APP_VERSION=2.0.1-staging
ENVIRONMENT=staging

# 容器映像
BACKEND_IMAGE=memoryark/backend
FRONTEND_IMAGE=memoryark/frontend
NGINX_IMAGE=nginx

# 網域配置
DOMAIN_NAME=staging-files.94work.net
PROTOCOL=https

# 資料庫配置
DATABASE_PATH=/home/memoryark-staging/data/memoryark.db
DATABASE_BACKUP_PATH=/home/memoryark-staging/backups/database

# 檔案儲存配置
UPLOADS_PATH=/home/memoryark-staging/uploads
UPLOADS_BACKUP_PATH=/home/memoryark-staging/backups/uploads
MAX_UPLOAD_SIZE=50M

# 網路配置
BACKEND_PORT=8180
FRONTEND_PORT=7101
NGINX_PORT=8080
HTTPS_PORT=8443

# 安全配置
JWT_SECRET_KEY=staging-jwt-secret-key
ADMIN_EMAIL=staging-admin@94work.net
CLOUDFLARE_ACCESS_AUD=staging-cloudflare-audience-id
CLOUDFLARE_ACCESS_CERT_URL=https://staging-team.cloudflareaccess.com/cdn-cgi/access/certs

# 效能配置
MAX_CONCURRENT_UPLOADS=5
MAX_CONCURRENT_EXPORTS=3
WORKER_PROCESSES=2
WORKER_CONNECTIONS=512

# 快取配置
ENABLE_CACHE=true
CACHE_TTL=1800
REDIS_URL=redis://localhost:6380

# 日誌配置
LOG_LEVEL=debug
LOG_FILE=/home/memoryark-staging/logs/app.log
ACCESS_LOG=/home/memoryark-staging/logs/access.log
ERROR_LOG=/home/memoryark-staging/logs/error.log

# 監控配置
ENABLE_METRICS=true
METRICS_PORT=9190
HEALTH_CHECK_INTERVAL=15

# 備份配置
BACKUP_RETENTION_DAYS=7
AUTO_BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 3 * * *"

# SSL 配置
SSL_CERT_PATH=/etc/ssl/certs/staging-memoryark.crt
SSL_KEY_PATH=/etc/ssl/private/staging-memoryark.key
SSL_CHAIN_PATH=/etc/ssl/certs/staging-memoryark-chain.crt

# 容器資源限制
BACKEND_MEMORY_LIMIT=512MB
BACKEND_CPU_LIMIT=0.5
FRONTEND_MEMORY_LIMIT=256MB
FRONTEND_CPU_LIMIT=0.3
NGINX_MEMORY_LIMIT=128MB
NGINX_CPU_LIMIT=0.2

# 重啟策略
RESTART_POLICY=unless-stopped
HEALTH_CHECK_RETRIES=2
HEALTH_CHECK_TIMEOUT=15s
HEALTH_CHECK_START_PERIOD=30s

# 特殊配置
ENABLE_DEBUG=true
ENABLE_PROFILING=true
MAINTENANCE_MODE=false