# Dockerfile.dev - 開發環境容器
FROM docker.io/golang:1.22-alpine

# 安裝開發工具和依賴
RUN apk add --no-cache \
    git \
    ca-certificates \
    tzdata \
    sqlite \
    ffmpeg \
    curl \
    bash \
    build-base \
    nodejs \
    npm

# 安裝 Go 開發工具
RUN go install github.com/cosmtrek/air@v1.49.0 && \
    go install github.com/swaggo/swag/cmd/swag@latest && \
    go install github.com/golangci/golangci-lint/cmd/golangci-lint@v1.59.1

WORKDIR /app

# 設置環境變量
ENV GO111MODULE=on
ENV GOPROXY=https://goproxy.cn,direct

# 複製項目文件
COPY . .

# 暴露開發端口
EXPOSE 7001 5173

# 設置開發命令
CMD ["tail", "-f", "/dev/null"]
