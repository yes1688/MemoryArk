# MemoryArk 2.0 專案指南

## 專案概述
MemoryArk 2.0 是真耶穌教會的媒體管理系統，使用 Vue 3 + TypeScript + Tailwind CSS 構建現代化的檔案管理界面。

## 開發規則

### 任務管理規則
1. **任務完成後必須更新文件勾核清單**
   - 完成任務時，必須更新 `docs/tasks/` 下對應任務文件的勾核清單
   - 更新總任務清單 `docs/tasks/README.md` 的進度追蹤
   - 更新主要任務清單 `docs/tasks/UI_REDESIGN_TASKS.md` 的狀態

2. **任務完成後自動繼續下一階段任務**
   - 完成當前任務後，自動開始執行下一個待辦任務
   - 按照優先級順序執行：高 → 中 → 低
   - 使用 TodoWrite 工具更新任務狀態

### 代碼規範
1. **使用新的 UI 組件系統**
   - 所有新功能必須使用 `@/components/ui/` 下的組件
   - 遵循 Windows 11 設計語言
   - 使用 TypeScript 確保類型安全

2. **文件結構**
   - 組件放在 `src/components/ui/[component-name]/`
   - 每個組件資料夾包含 `App[ComponentName].vue`
   - 在 `src/components/ui/index.ts` 統一導出

3. **樣式規範**
   - 使用 Tailwind CSS 類別
   - 遵循教會配色方案（主色：深藍、次色：金色）
   - 使用 `rounded-win11` 等自定義樣式

### 測試和建構
1. **每次修改後必須執行建構**
   - 使用 `npm run build` 檢查 TypeScript 錯誤
   - 修復所有編譯錯誤後才能提交

2. **漸進式開發**
   - 先實作核心功能，再增加進階功能
   - 每個子任務完成後立即測試和建構

## 當前任務狀態

### 已完成任務
- ✅ 任務 001：建立設計系統基礎
- ✅ 任務 002：重構檔案管理界面
  - ✅ 拖放功能（AppDropZone, AppFileDragger）
  - ✅ 檔案預覽功能（AppFilePreview）
  - ✅ 進階搜尋篩選（AppSearchFilter）
- ✅ 任務 003：建立教會特色功能
  - ✅ 共享資料夾頁面（SharedFolderView）
  - ✅ 安息日資料專區（SabbathDataView）
  - ✅ 教會分類和配色系統
  - ✅ 共享資源組件（SharedResourceCard/Item）
  - ✅ 安息日檔案組件（SabbathFileCard/Item）
- ✅ 任務 004：實作進階功能（2025-01-07 完成）
  - ✅ 標籤系統（AppTagManager）- 支援建立、搜尋、分類標籤
  - ✅ 收藏功能（AppFavoriteManager）- 支援收藏夾分類管理
  - ✅ 最近訪問記錄（AppAccessHistory）- 時間分組顯示和清除功能
  - ✅ 分享連結生成（AppShareLinkGenerator）- 支援過期時間、密碼保護、下載限制
  - ✅ FileCard 整合所有進階功能（標籤、收藏、分享）
- ✅ 任務 005：重新設計首頁（2025-01-07 完成）
  - ✅ 歡迎頭部（WelcomeHeader）- 個人化問候、統計資訊、教會資訊
  - ✅ 快速操作區（QuickActions）- 上傳、新建資料夾、共享、安息日資料
  - ✅ 最近檔案小工具（RecentFilesWidget）- 多視圖模式、時間分組
  - ✅ 儲存空間統計（StorageStatsWidget）- 圓形進度圖、類型分布、警告
  - ✅ 快速訪問資料夾、我的收藏、訪問記錄整合

### 進行中任務
**無**

### 待執行任務
- 🔄 任務 006：優化視覺效果（下一個任務）
- 任務 007：整合和測試

## 系統測試和訪問指南

### 🔗 系統訪問方式
**正式環境**: https://files.94work.net/

### 🧪 系統測試流程

#### 1. 訪問系統
- 開啟瀏覽器，前往 https://files.94work.net/
- 系統會自動重定向到 Cloudflare Access 登入頁面
- 使用 Google 帳號或電子郵件驗證碼登入

#### 2. 完成認證流程
1. **Cloudflare 認證**: 通過 Cloudflare Access 驗證身份
2. **用戶註冊**: 如果是首次使用，需要完成註冊申請
3. **等待審核**: 註冊後等待管理員審核通過
4. **系統訪問**: 審核通過後即可正常使用系統

#### 3. 功能測試清單

**✅ 已驗證功能**:
- 首頁顯示和統計資訊
- 檔案管理界面和工具列
- 上傳頁面的拖放功能
- 系統管理頁面（需管理員權限）
- 主題切換功能

**⚠️ 需要修復的功能**:
- 共享資料夾頁面（/shared）- 內容載入失敗
- 安息日資料頁面（/sabbath）- 內容載入失敗
- 管理頁面數據顯示錯誤

**🔧 測試注意事項**:
1. **認證要求**: 所有頁面都需要完整的認證流程
2. **權限控制**: 管理功能需要管理員權限
3. **瀏覽器相容**: 建議使用 Chrome、Firefox、Safari 測試
4. **網路環境**: 需要穩定的網路連線

#### 4. 錯誤回報流程
如發現問題，請記錄：
- 具體錯誤訊息
- 重現步驟
- 瀏覽器類型和版本
- 使用者權限級別

### 🐛 已知問題和限制

#### 高優先級問題
1. **頁面載入失敗**: /shared 和 /sabbath 頁面無法顯示內容
2. **TypeScript 錯誤**: 37+ 個類型定義錯誤影響功能
3. **數據顯示**: 管理頁面儲存空間顯示 "NaN undefined"
4. **主題切換**: 淺色主題下導航欄仍為深色

#### 中優先級問題
1. **用戶資訊不一致**: 頭像顯示時而 "U" 時而 "劉"
2. **載入狀態缺失**: 部分頁面缺乏載入指示器

### 🎯 測試建議

#### UI/UX 測試
1. **視覺一致性**: 檢查所有頁面的設計風格統一性
2. **響應式設計**: 測試不同螢幕尺寸的顯示效果
3. **交互體驗**: 驗證按鈕、連結、表單的交互反饋
4. **無障礙功能**: 測試鍵盤導航和螢幕閱讀器相容性

#### 功能測試
1. **檔案操作**: 上傳、下載、刪除、重命名
2. **資料夾管理**: 建立、移動、共享資料夾
3. **搜尋功能**: 檔案搜尋和篩選
4. **用戶管理**: 註冊、審核、權限分配

#### 效能測試
1. **載入速度**: 各頁面的首次載入時間
2. **檔案上傳**: 大檔案上傳的穩定性
3. **並發使用**: 多用戶同時使用的效能

## 重要提醒
- 每次完成任務時，請同步更新所有相關文件的勾核清單
- 自動繼續執行下一個優先任務
- 保持代碼品質和 Windows 11 設計一致性
- 測試時請注意記錄發現的問題，以便後續修復