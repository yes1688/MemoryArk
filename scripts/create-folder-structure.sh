#!/bin/bash

# MemoryArk2 æ•™æœƒå½±éŸ³å›æ†¶éŒ„ç³»çµ± - è³‡æ–™å¤¾çµæ§‹å»ºç«‹è…³æœ¬
# ç‚ºçœŸè€¶ç©Œæ•™æœƒè¨­è¨ˆçš„å¯¦ç”¨æª”æ¡ˆçµ„ç¹”ç³»çµ±

set -e

# åŸºç¤ç›®éŒ„è·¯å¾‘
BASE_DIR="uploads/files"
CURRENT_YEAR=$(date +%Y)

echo "ğŸ›ï¸  ç‚º MemoryArk2 æ•™æœƒå½±éŸ³å›æ†¶éŒ„ç³»çµ±å»ºç«‹è³‡æ–™å¤¾çµæ§‹..."
echo "ğŸ“… ç›®å‰å¹´ä»½: $CURRENT_YEAR"
echo ""

# å‰µå»ºä¸»è¦åˆ†é¡ç›®éŒ„
create_main_categories() {
    echo "ğŸ“ å»ºç«‹ä¸»è¦åˆ†é¡ç›®éŒ„..."
    
    # 1. æŒ‰å¹´ä»½çµ„ç¹” (æœ€è¿‘5å¹´)
    for year in $(seq $((CURRENT_YEAR-2)) $((CURRENT_YEAR+2))); do
        mkdir -p "$BASE_DIR/æŒ‰å¹´ä»½åˆ†é¡/$yearå¹´"
    done
    
    # 2. æŒ‰æ•™æœƒæ´»å‹•åˆ†é¡
    mkdir -p "$BASE_DIR/æ•™æœƒæ´»å‹•åˆ†é¡"
    
    # 3. æŒ‰å…§å®¹é¡å‹åˆ†é¡
    mkdir -p "$BASE_DIR/æŒ‰å…§å®¹é¡å‹åˆ†é¡"
    
    # 4. æŒ‰éƒ¨é–€åˆ†é¡
    mkdir -p "$BASE_DIR/æŒ‰éƒ¨é–€åˆ†é¡"
    
    # 5. ç‰¹æ®Šåˆ†é¡
    mkdir -p "$BASE_DIR/ç‰¹æ®Šåˆ†é¡"
    
    echo "âœ… ä¸»è¦åˆ†é¡ç›®éŒ„å‰µå»ºå®Œæˆ"
}

# å‰µå»ºæ•™æœƒæ´»å‹•å­ç›®éŒ„
create_church_activities() {
    echo "ğŸ“ å»ºç«‹æ•™æœƒæ´»å‹•å­ç›®éŒ„..."
    
    ACTIVITY_DIR="$BASE_DIR/æ•™æœƒæ´»å‹•åˆ†é¡"
    
    # é‡è¦ç¯€æœŸ
    mkdir -p "$ACTIVITY_DIR/é‡è¦ç¯€æœŸ/è–èª•ç¯€"
    mkdir -p "$ACTIVITY_DIR/é‡è¦ç¯€æœŸ/å¾©æ´»ç¯€"
    mkdir -p "$ACTIVITY_DIR/é‡è¦ç¯€æœŸ/é€¾è¶Šç¯€"
    mkdir -p "$ACTIVITY_DIR/é‡è¦ç¯€æœŸ/äº”æ—¬ç¯€"
    mkdir -p "$ACTIVITY_DIR/é‡è¦ç¯€æœŸ/ä½æ£šç¯€"
    
    # è–ç¦®å…¸
    mkdir -p "$ACTIVITY_DIR/è–ç¦®å…¸/æ´—ç¦®"
    mkdir -p "$ACTIVITY_DIR/è–ç¦®å…¸/è–é¤ç¦®"
    mkdir -p "$ACTIVITY_DIR/è–ç¦®å…¸/æ´—è…³ç¦®"
    mkdir -p "$ACTIVITY_DIR/è–ç¦®å…¸/æŒ‰æ‰‹ç¦®"
    
    # èšæœƒæ´»å‹•
    mkdir -p "$ACTIVITY_DIR/èšæœƒæ´»å‹•/å®‰æ¯æ—¥èšæœƒ"
    mkdir -p "$ACTIVITY_DIR/èšæœƒæ´»å‹•/é€±ä¸‰èšæœƒ"
    mkdir -p "$ACTIVITY_DIR/èšæœƒæ´»å‹•/ç¦±å‘Šæœƒ"
    mkdir -p "$ACTIVITY_DIR/èšæœƒæ´»å‹•/æŸ¥ç¶“ç­"
    mkdir -p "$ACTIVITY_DIR/èšæœƒæ´»å‹•/éˆæ©æœƒ"
    mkdir -p "$ACTIVITY_DIR/èšæœƒæ´»å‹•/åŸ¹éˆæœƒ"
    
    # ç‰¹åˆ¥èšæœƒ
    mkdir -p "$ACTIVITY_DIR/ç‰¹åˆ¥èšæœƒ/ä½ˆé“æœƒ"
    mkdir -p "$ACTIVITY_DIR/ç‰¹åˆ¥èšæœƒ/æ„Ÿæ©è¦‹è­‰æœƒ"
    mkdir -p "$ACTIVITY_DIR/ç‰¹åˆ¥èšæœƒ/è©©é Œè®šç¾æœƒ"
    mkdir -p "$ACTIVITY_DIR/ç‰¹åˆ¥èšæœƒ/å¹´çµ‚æ„Ÿæ©èšæœƒ"
    mkdir -p "$ACTIVITY_DIR/ç‰¹åˆ¥èšæœƒ/æ–°å¹´ç¥ˆç¦±æœƒ"
    
    # æ•™æœƒæ…¶å…¸
    mkdir -p "$ACTIVITY_DIR/æ•™æœƒæ…¶å…¸/å»ºå ‚é€±å¹´ç´€å¿µ"
    mkdir -p "$ACTIVITY_DIR/æ•™æœƒæ…¶å…¸/ç‰§å¸«å°±è·å…¸ç¦®"
    mkdir -p "$ACTIVITY_DIR/æ•™æœƒæ…¶å…¸/ç»å ‚å…¸ç¦®"
    mkdir -p "$ACTIVITY_DIR/æ•™æœƒæ…¶å…¸/é‡è¦ç´€å¿µæ´»å‹•"
    
    echo "âœ… æ•™æœƒæ´»å‹•å­ç›®éŒ„å‰µå»ºå®Œæˆ"
}

# å‰µå»ºå…§å®¹é¡å‹å­ç›®éŒ„
create_content_types() {
    echo "ğŸ“ å»ºç«‹å…§å®¹é¡å‹å­ç›®éŒ„..."
    
    TYPE_DIR="$BASE_DIR/æŒ‰å…§å®¹é¡å‹åˆ†é¡"
    
    # å½±éŸ³å…§å®¹
    mkdir -p "$TYPE_DIR/å½±ç‰‡/è¬›é“éŒ„å½±"
    mkdir -p "$TYPE_DIR/å½±ç‰‡/èšæœƒå¯¦æ³"
    mkdir -p "$TYPE_DIR/å½±ç‰‡/è¦‹è­‰åˆ†äº«"
    mkdir -p "$TYPE_DIR/å½±ç‰‡/è©©æ­Œè®šç¾"
    mkdir -p "$TYPE_DIR/å½±ç‰‡/æ•™è‚²è¨“ç·´"
    mkdir -p "$TYPE_DIR/å½±ç‰‡/æ´»å‹•ç´€éŒ„"
    
    mkdir -p "$TYPE_DIR/éŸ³æª”/è¬›é“éŒ„éŸ³"
    mkdir -p "$TYPE_DIR/éŸ³æª”/è©©æ­ŒéŸ³æ¨‚"
    mkdir -p "$TYPE_DIR/éŸ³æª”/ç¦±å‘ŠéŒ„éŸ³"
    mkdir -p "$TYPE_DIR/éŸ³æª”/è¦‹è­‰åˆ†äº«"
    
    # åœ–ç‰‡å…§å®¹
    mkdir -p "$TYPE_DIR/ç…§ç‰‡/èšæœƒç…§ç‰‡"
    mkdir -p "$TYPE_DIR/ç…§ç‰‡/æ´»å‹•ç…§ç‰‡"
    mkdir -p "$TYPE_DIR/ç…§ç‰‡/åœ˜å¥‘ç…§ç‰‡"
    mkdir -p "$TYPE_DIR/ç…§ç‰‡/æ•™æœƒå»ºç¯‰"
    mkdir -p "$TYPE_DIR/ç…§ç‰‡/æ­·å²ç…§ç‰‡"
    mkdir -p "$TYPE_DIR/ç…§ç‰‡/äººç‰©ç…§ç‰‡"
    
    # æ–‡ä»¶è³‡æ–™
    mkdir -p "$TYPE_DIR/æ–‡ä»¶/è¬›é“ç¨¿"
    mkdir -p "$TYPE_DIR/æ–‡ä»¶/æŸ¥ç¶“è³‡æ–™"
    mkdir -p "$TYPE_DIR/æ–‡ä»¶/æ•™æœƒå…¬å‘Š"
    mkdir -p "$TYPE_DIR/æ–‡ä»¶/æœƒè­°è¨˜éŒ„"
    mkdir -p "$TYPE_DIR/æ–‡ä»¶/æ­·å²æ–‡ç»"
    mkdir -p "$TYPE_DIR/æ–‡ä»¶/æ•™æè¬›ç¾©"
    
    # ç°¡å ±æŠ•å½±ç‰‡
    mkdir -p "$TYPE_DIR/ç°¡å ±/è¬›é“ç°¡å ±"
    mkdir -p "$TYPE_DIR/ç°¡å ±/æ•™å­¸ç°¡å ±"
    mkdir -p "$TYPE_DIR/ç°¡å ±/æ´»å‹•ç°¡å ±"
    mkdir -p "$TYPE_DIR/ç°¡å ±/è©©æ­ŒæŠ•å½±ç‰‡"
    
    echo "âœ… å…§å®¹é¡å‹å­ç›®éŒ„å‰µå»ºå®Œæˆ"
}

# å‰µå»ºéƒ¨é–€åˆ†é¡å­ç›®éŒ„
create_departments() {
    echo "ğŸ“ å»ºç«‹éƒ¨é–€åˆ†é¡å­ç›®éŒ„..."
    
    DEPT_DIR="$BASE_DIR/æŒ‰éƒ¨é–€åˆ†é¡"
    
    # å¹´é½¡éƒ¨é–€
    mkdir -p "$DEPT_DIR/é’å¹´åœ˜å¥‘"
    mkdir -p "$DEPT_DIR/é’å¹´åœ˜å¥‘/é’å¹´èšæœƒ"
    mkdir -p "$DEPT_DIR/é’å¹´åœ˜å¥‘/é’å¹´æ´»å‹•"
    mkdir -p "$DEPT_DIR/é’å¹´åœ˜å¥‘/é’å¹´æœäº‹"
    
    mkdir -p "$DEPT_DIR/å©¦å¥³åœ˜å¥‘"
    mkdir -p "$DEPT_DIR/å©¦å¥³åœ˜å¥‘/å©¦å¥³èšæœƒ"
    mkdir -p "$DEPT_DIR/å©¦å¥³åœ˜å¥‘/å©¦å¥³æ´»å‹•"
    mkdir -p "$DEPT_DIR/å©¦å¥³åœ˜å¥‘/å©¦å¥³æœäº‹"
    
    mkdir -p "$DEPT_DIR/å…’ç«¥ä¸»æ—¥å­¸"
    mkdir -p "$DEPT_DIR/å…’ç«¥ä¸»æ—¥å­¸/å…’ç«¥èšæœƒ"
    mkdir -p "$DEPT_DIR/å…’ç«¥ä¸»æ—¥å­¸/å…’ç«¥æ´»å‹•"
    mkdir -p "$DEPT_DIR/å…’ç«¥ä¸»æ—¥å­¸/æ•™å­¸è³‡æ–™"
    
    mkdir -p "$DEPT_DIR/å°‘å¹´åœ˜å¥‘"
    mkdir -p "$DEPT_DIR/å°‘å¹´åœ˜å¥‘/å°‘å¹´èšæœƒ"
    mkdir -p "$DEPT_DIR/å°‘å¹´åœ˜å¥‘/å°‘å¹´æ´»å‹•"
    mkdir -p "$DEPT_DIR/å°‘å¹´åœ˜å¥‘/å°‘å¹´æœäº‹"
    
    # äº‹å·¥éƒ¨é–€
    mkdir -p "$DEPT_DIR/è©©ç­äº‹å·¥"
    mkdir -p "$DEPT_DIR/è©©ç­äº‹å·¥/è©©æ­Œç·´ç¿’"
    mkdir -p "$DEPT_DIR/è©©ç­äº‹å·¥/è©©æ­Œè¡¨æ¼”"
    mkdir -p "$DEPT_DIR/è©©ç­äº‹å·¥/æ¨‚å™¨è¨“ç·´"
    
    mkdir -p "$DEPT_DIR/æ•™è‚²äº‹å·¥"
    mkdir -p "$DEPT_DIR/æ•™è‚²äº‹å·¥/æˆäººæ•™è‚²"
    mkdir -p "$DEPT_DIR/æ•™è‚²äº‹å·¥/å…’ç«¥æ•™è‚²"
    mkdir -p "$DEPT_DIR/æ•™è‚²äº‹å·¥/å¸«è³‡åŸ¹è¨“"
    
    mkdir -p "$DEPT_DIR/å‚³é“äº‹å·¥"
    mkdir -p "$DEPT_DIR/å‚³é“äº‹å·¥/ä½ˆé“æ´»å‹•"
    mkdir -p "$DEPT_DIR/å‚³é“äº‹å·¥/è¨ªå•é—œæ‡·"
    mkdir -p "$DEPT_DIR/å‚³é“äº‹å·¥/ç¦éŸ³å·¥ä½œ"
    
    mkdir -p "$DEPT_DIR/é—œæ‡·äº‹å·¥"
    mkdir -p "$DEPT_DIR/é—œæ‡·äº‹å·¥/æ¢è¨ªè¨˜éŒ„"
    mkdir -p "$DEPT_DIR/é—œæ‡·äº‹å·¥/é—œæ‡·æ´»å‹•"
    mkdir -p "$DEPT_DIR/é—œæ‡·äº‹å·¥/ç¤¾å€æœå‹™"
    
    # è¡Œæ”¿éƒ¨é–€
    mkdir -p "$DEPT_DIR/åŸ·äº‹æœƒ"
    mkdir -p "$DEPT_DIR/åŸ·äº‹æœƒ/æœƒè­°è¨˜éŒ„"
    mkdir -p "$DEPT_DIR/åŸ·äº‹æœƒ/æ±ºè­°äº‹é …"
    mkdir -p "$DEPT_DIR/åŸ·äº‹æœƒ/å¹´åº¦å ±å‘Š"
    
    mkdir -p "$DEPT_DIR/è²¡å‹™çµ„"
    mkdir -p "$DEPT_DIR/è²¡å‹™çµ„/å¥‰ç»è¨˜éŒ„"
    mkdir -p "$DEPT_DIR/è²¡å‹™çµ„/æ”¯å‡ºè¨˜éŒ„"
    mkdir -p "$DEPT_DIR/è²¡å‹™çµ„/è²¡å‹™å ±è¡¨"
    
    echo "âœ… éƒ¨é–€åˆ†é¡å­ç›®éŒ„å‰µå»ºå®Œæˆ"
}

# å‰µå»ºç‰¹æ®Šåˆ†é¡å­ç›®éŒ„
create_special_categories() {
    echo "ğŸ“ å»ºç«‹ç‰¹æ®Šåˆ†é¡å­ç›®éŒ„..."
    
    SPECIAL_DIR="$BASE_DIR/ç‰¹æ®Šåˆ†é¡"
    
    # æ­·å²ä¿å­˜
    mkdir -p "$SPECIAL_DIR/æ­·å²ä¿å­˜/æ•™æœƒå‰µç«‹æ­·å²"
    mkdir -p "$SPECIAL_DIR/æ­·å²ä¿å­˜/é‡è¦äººç‰©"
    mkdir -p "$SPECIAL_DIR/æ­·å²ä¿å­˜/æ­·å²æ–‡ç»"
    mkdir -p "$SPECIAL_DIR/æ­·å²ä¿å­˜/è€ç…§ç‰‡çè—"
    
    # ç´€å¿µå°ˆè¼¯
    mkdir -p "$SPECIAL_DIR/ç´€å¿µå°ˆè¼¯/å·²æ•…ä¿¡å¾’ç´€å¿µ"
    mkdir -p "$SPECIAL_DIR/ç´€å¿µå°ˆè¼¯/ç‰§å¸«ç´€å¿µå°ˆè¼¯"
    mkdir -p "$SPECIAL_DIR/ç´€å¿µå°ˆè¼¯/é‡è¦äº‹ä»¶ç´€å¿µ"
    
    # åŸ¹è¨“è³‡æº
    mkdir -p "$SPECIAL_DIR/åŸ¹è¨“è³‡æº/è¬›é“è¨“ç·´"
    mkdir -p "$SPECIAL_DIR/åŸ¹è¨“è³‡æº/äº‹å¥‰è¨“ç·´"
    mkdir -p "$SPECIAL_DIR/åŸ¹è¨“è³‡æº/éˆä¿®è³‡æ–™"
    mkdir -p "$SPECIAL_DIR/åŸ¹è¨“è³‡æº/æŸ¥ç¶“æŒ‡å—"
    
    # ç¯€æ…¶æ´»å‹•
    mkdir -p "$SPECIAL_DIR/ç¯€æ…¶æ´»å‹•/ç”Ÿæ—¥æ…¶ç¥"
    mkdir -p "$SPECIAL_DIR/ç¯€æ…¶æ´»å‹•/çµå©šå…¸ç¦®"
    mkdir -p "$SPECIAL_DIR/ç¯€æ…¶æ´»å‹•/ç•¢æ¥­å…¸ç¦®"
    mkdir -p "$SPECIAL_DIR/ç¯€æ…¶æ´»å‹•/å…¶ä»–æ…¶å…¸"
    
    # å¤–å±•æ´»å‹•
    mkdir -p "$SPECIAL_DIR/å¤–å±•æ´»å‹•/è¯åˆèšæœƒ"
    mkdir -p "$SPECIAL_DIR/å¤–å±•æ´»å‹•/æ•™æœƒé–“äº¤æµ"
    mkdir -p "$SPECIAL_DIR/å¤–å±•æ´»å‹•/å®£æ•™æ´»å‹•"
    mkdir -p "$SPECIAL_DIR/å¤–å±•æ´»å‹•/ç¤¾å€æœå‹™"
    
    echo "âœ… ç‰¹æ®Šåˆ†é¡å­ç›®éŒ„å‰µå»ºå®Œæˆ"
}

# å‰µå»ºå¹´åº¦å­ç›®éŒ„çµæ§‹
create_yearly_structure() {
    echo "ğŸ“ ç‚ºæ¯å€‹å¹´ä»½å»ºç«‹è©³ç´°å­ç›®éŒ„..."
    
    for year in $(seq $((CURRENT_YEAR-2)) $((CURRENT_YEAR+2))); do
        YEAR_DIR="$BASE_DIR/æŒ‰å¹´ä»½åˆ†é¡/$yearå¹´"
        
        # æŒ‰æœˆä»½åˆ†é¡
        for month in {01..12}; do
            mkdir -p "$YEAR_DIR/æŒ‰æœˆä»½/$monthæœˆ"
        done
        
        # é‡è¦æ´»å‹•
        mkdir -p "$YEAR_DIR/é‡è¦æ´»å‹•/ç¯€æœŸæ…¶å…¸"
        mkdir -p "$YEAR_DIR/é‡è¦æ´»å‹•/ç‰¹åˆ¥èšæœƒ"
        mkdir -p "$YEAR_DIR/é‡è¦æ´»å‹•/æ•™æœƒæ´»å‹•"
        
        # å®šæœŸèšæœƒ
        mkdir -p "$YEAR_DIR/å®šæœŸèšæœƒ/å®‰æ¯æ—¥èšæœƒ"
        mkdir -p "$YEAR_DIR/å®šæœŸèšæœƒ/é€±ä¸‰èšæœƒ"
        mkdir -p "$YEAR_DIR/å®šæœŸèšæœƒ/ç¦±å‘Šæœƒ"
        
        # å¹´åº¦ç¸½çµ
        mkdir -p "$YEAR_DIR/å¹´åº¦ç¸½çµ/å¹´çµ‚å ±å‘Š"
        mkdir -p "$YEAR_DIR/å¹´åº¦ç¸½çµ/æ„Ÿæ©è¦‹è­‰"
        mkdir -p "$YEAR_DIR/å¹´åº¦ç¸½çµ/çµ±è¨ˆè³‡æ–™"
    done
    
    echo "âœ… å¹´åº¦å­ç›®éŒ„çµæ§‹å‰µå»ºå®Œæˆ"
}

# å‰µå»ºèªªæ˜æ–‡ä»¶
create_documentation() {
    echo "ğŸ“ å‰µå»ºè³‡æ–™å¤¾ä½¿ç”¨èªªæ˜æ–‡ä»¶..."
    
    # ä¸»è¦èªªæ˜æ–‡ä»¶
    cat > "$BASE_DIR/ğŸ“– è³‡æ–™å¤¾ä½¿ç”¨èªªæ˜.md" << 'EOF'
# MemoryArk2 æ•™æœƒå½±éŸ³å›æ†¶éŒ„ç³»çµ± - è³‡æ–™å¤¾ä½¿ç”¨æŒ‡å—

## ğŸ›ï¸ ç³»çµ±æ¦‚è¿°

æœ¬ç³»çµ±å°ˆç‚ºçœŸè€¶ç©Œæ•™æœƒè¨­è¨ˆï¼Œæä¾›å®Œæ•´çš„å½±éŸ³æª”æ¡ˆç®¡ç†å’Œçµ„ç¹”åŠŸèƒ½ã€‚è³‡æ–™å¤¾çµæ§‹ä¾ç…§æ•™æœƒå¯¦éš›éœ€æ±‚è¨­è¨ˆï¼Œæ–¹ä¾¿ä¿¡å¾’å’ŒåŒå·¥å¿«é€Ÿæ‰¾åˆ°æ‰€éœ€è³‡æ–™ã€‚

## ğŸ“ ä¸»è¦åˆ†é¡èªªæ˜

### 1. æŒ‰å¹´ä»½åˆ†é¡
- **ç”¨é€”**ï¼šä¾ç…§æ™‚é–“é †åºä¿å­˜æª”æ¡ˆï¼Œä¾¿æ–¼è¿½æº¯æ­·å²
- **çµæ§‹**ï¼šå¹´ä»½ > æœˆä»½ > å…·é«”æ´»å‹•
- **é©ç”¨**ï¼šæ‰€æœ‰éœ€è¦æŒ‰æ™‚é–“æŸ¥æ‰¾çš„æª”æ¡ˆ

### 2. æ•™æœƒæ´»å‹•åˆ†é¡
- **ç”¨é€”**ï¼šä¾ç…§æ•™æœƒæ´»å‹•æ€§è³ªåˆ†é¡
- **åŒ…å«**ï¼šé‡è¦ç¯€æœŸã€è–ç¦®å…¸ã€èšæœƒæ´»å‹•ã€ç‰¹åˆ¥èšæœƒã€æ•™æœƒæ…¶å…¸
- **é©ç”¨**ï¼šæŒ‰æ´»å‹•é¡å‹æŸ¥æ‰¾æª”æ¡ˆ

### 3. æŒ‰å…§å®¹é¡å‹åˆ†é¡
- **ç”¨é€”**ï¼šä¾ç…§æª”æ¡ˆæ ¼å¼å’Œå…§å®¹æ€§è³ªåˆ†é¡
- **åŒ…å«**ï¼šå½±ç‰‡ã€éŸ³æª”ã€ç…§ç‰‡ã€æ–‡ä»¶ã€ç°¡å ±
- **é©ç”¨**ï¼šéœ€è¦ç‰¹å®šæ ¼å¼æª”æ¡ˆæ™‚æŸ¥æ‰¾

### 4. æŒ‰éƒ¨é–€åˆ†é¡
- **ç”¨é€”**ï¼šä¾ç…§æ•™æœƒçµ„ç¹”æ¶æ§‹åˆ†é¡
- **åŒ…å«**ï¼šå„å¹´é½¡åœ˜å¥‘ã€äº‹å·¥éƒ¨é–€ã€è¡Œæ”¿éƒ¨é–€
- **é©ç”¨**ï¼šéƒ¨é–€å°ˆå±¬æª”æ¡ˆç®¡ç†

### 5. ç‰¹æ®Šåˆ†é¡
- **ç”¨é€”**ï¼šé‡è¦ä½†ä¸å¸¸è¦‹çš„æª”æ¡ˆåˆ†é¡
- **åŒ…å«**ï¼šæ­·å²ä¿å­˜ã€ç´€å¿µå°ˆè¼¯ã€åŸ¹è¨“è³‡æºã€ç¯€æ…¶æ´»å‹•ã€å¤–å±•æ´»å‹•
- **é©ç”¨**ï¼šç‰¹æ®Šéœ€æ±‚å’Œé•·æœŸä¿å­˜

## ğŸ“ å‘½åè¦ç¯„å»ºè­°

### æª”æ¡ˆå‘½åæ ¼å¼
```
æ—¥æœŸ_æ´»å‹•åç¨±_å…§å®¹æè¿°_ç‰ˆæœ¬
ä¾‹å¦‚ï¼š20250608_å®‰æ¯æ—¥èšæœƒ_è¬›é“éŒ„å½±_v1.mp4
```

### è³‡æ–™å¤¾å‘½åæ ¼å¼
```
å¹´ä»½/ä¸»è¦åˆ†é¡/æ¬¡è¦åˆ†é¡/å…·é«”å…§å®¹
ä¾‹å¦‚ï¼š2025å¹´/æ•™æœƒæ´»å‹•åˆ†é¡/è–ç¦®å…¸/æ´—ç¦®
```

## ğŸ¯ ä½¿ç”¨å»ºè­°

### ä¸Šå‚³æª”æ¡ˆæ™‚
1. å…ˆç¢ºå®šæª”æ¡ˆæ€§è³ªå’Œç”¨é€”
2. é¸æ“‡æœ€åˆé©çš„åˆ†é¡æ–¹å¼
3. ä½¿ç”¨æ¸…æ¥šçš„æª”åæè¿°
4. æ·»åŠ ç›¸é—œæ¨™ç±¤ä¾¿æ–¼æœå°‹

### æŸ¥æ‰¾æª”æ¡ˆæ™‚
1. å„ªå…ˆä½¿ç”¨æœå°‹åŠŸèƒ½
2. æ ¹æ“šè¨˜æ†¶é¸æ“‡åˆ†é¡æ–¹å¼
3. åˆ©ç”¨ç¯©é¸åŠŸèƒ½ç¸®å°ç¯„åœ
4. æŸ¥çœ‹æœ€è¿‘è¨ªå•è¨˜éŒ„

### ç®¡ç†æª”æ¡ˆæ™‚
1. å®šæœŸæ•´ç†å’Œæ­¸æª”
2. åˆªé™¤é‡è¤‡æˆ–ç„¡ç”¨æª”æ¡ˆ
3. æ›´æ–°æª”æ¡ˆæ¨™ç±¤å’Œæè¿°
4. å‚™ä»½é‡è¦æª”æ¡ˆ

## ğŸ“ æŠ€è¡“æ”¯æ´

å¦‚æœ‰ä»»ä½•ä½¿ç”¨å•é¡Œï¼Œè«‹è¯ç¹«ï¼š
- ç³»çµ±ç®¡ç†å“¡
- æˆ–åƒè€ƒç³»çµ±å…§å»ºçš„èªªæ˜æ–‡æª”

---
*å»ºç«‹æ—¥æœŸï¼š2025å¹´6æœˆ8æ—¥*
*é©ç”¨ç‰ˆæœ¬ï¼šMemoryArk 2.0*
EOF

    # å„åˆ†é¡å°ˆç”¨èªªæ˜
    cat > "$BASE_DIR/æ•™æœƒæ´»å‹•åˆ†é¡/ğŸ“ æ´»å‹•åˆ†é¡èªªæ˜.md" << 'EOF'
# æ•™æœƒæ´»å‹•åˆ†é¡ä½¿ç”¨èªªæ˜

## ğŸ¯ åˆ†é¡åŸå‰‡
æŒ‰ç…§çœŸè€¶ç©Œæ•™æœƒçš„æ´»å‹•æ€§è³ªå’Œé‡è¦ç¨‹åº¦åˆ†é¡

## ğŸ“… é‡è¦ç¯€æœŸ
- è–èª•ç¯€ã€å¾©æ´»ç¯€ã€é€¾è¶Šç¯€ã€äº”æ—¬ç¯€ã€ä½æ£šç¯€
- ä¸Šå‚³ç›¸é—œæ…¶ç¥æ´»å‹•çš„å½±éŸ³æª”æ¡ˆ

## â›ª è–ç¦®å…¸
- æ´—ç¦®ã€è–é¤ç¦®ã€æ´—è…³ç¦®ã€æŒ‰æ‰‹ç¦®
- è¨˜éŒ„ç¥è–æ™‚åˆ»çš„çè²´å½±éŸ³

## ğŸ™ èšæœƒæ´»å‹•
- å®šæœŸèšæœƒï¼šå®‰æ¯æ—¥èšæœƒã€é€±ä¸‰èšæœƒã€ç¦±å‘Šæœƒ
- æ•™è‚²èšæœƒï¼šæŸ¥ç¶“ç­ã€éˆæ©æœƒã€åŸ¹éˆæœƒ

## âœ¨ ç‰¹åˆ¥èšæœƒ
- ä½ˆé“æœƒã€æ„Ÿæ©è¦‹è­‰æœƒã€è©©é Œè®šç¾æœƒ
- å­£ç¯€æ€§èšæœƒï¼šå¹´çµ‚æ„Ÿæ©ã€æ–°å¹´ç¥ˆç¦±

## ğŸ›ï¸ æ•™æœƒæ…¶å…¸
- å»ºå ‚é€±å¹´ã€ç‰§å¸«å°±è·ã€ç»å ‚å…¸ç¦®
- é‡è¦ç´€å¿µæ´»å‹•å’Œé‡Œç¨‹ç¢‘äº‹ä»¶
EOF

    cat > "$BASE_DIR/æŒ‰éƒ¨é–€åˆ†é¡/ğŸ“ éƒ¨é–€åˆ†é¡èªªæ˜.md" << 'EOF'
# æŒ‰éƒ¨é–€åˆ†é¡ä½¿ç”¨èªªæ˜

## ğŸ‘¥ å¹´é½¡åˆ†çµ„
- **é’å¹´åœ˜å¥‘**ï¼š18-35æ­²ä¿¡å¾’æ´»å‹•
- **å©¦å¥³åœ˜å¥‘**ï¼šå§Šå¦¹å°ˆå±¬èšæœƒå’Œæœäº‹
- **å…’ç«¥ä¸»æ—¥å­¸**ï¼š12æ­²ä»¥ä¸‹å…’ç«¥æ•™è‚²
- **å°‘å¹´åœ˜å¥‘**ï¼š13-17æ­²é’å°‘å¹´æ´»å‹•

## ğŸ¼ äº‹å·¥éƒ¨é–€
- **è©©ç­äº‹å·¥**ï¼šéŸ³æ¨‚ã€è©©æ­Œç›¸é—œæ´»å‹•
- **æ•™è‚²äº‹å·¥**ï¼šæ•™å­¸ã€åŸ¹è¨“ç›¸é—œå…§å®¹
- **å‚³é“äº‹å·¥**ï¼šä½ˆé“ã€å®£æ•™ç›¸é—œå·¥ä½œ
- **é—œæ‡·äº‹å·¥**ï¼šæ¢è¨ªã€ç…§é¡§ç›¸é—œæœå‹™

## ğŸ“‹ è¡Œæ”¿éƒ¨é–€
- **åŸ·äº‹æœƒ**ï¼šæ•™æœƒæ²»ç†ç›¸é—œæ–‡ä»¶
- **è²¡å‹™çµ„**ï¼šå¥‰ç»ã€æ”¯å‡ºç›¸é—œè¨˜éŒ„

## ğŸ“‚ æª”æ¡ˆç®¡ç†å»ºè­°
1. æ¯å€‹éƒ¨é–€è² è²¬è‡ªå·±çš„æª”æ¡ˆç®¡ç†
2. é‡è¦æª”æ¡ˆéœ€è¦å‚™ä»½åˆ°å¹´ä»½åˆ†é¡
3. å®šæœŸæ¸…ç†éæœŸæˆ–é‡è¤‡æª”æ¡ˆ
4. ä¿æŒæª”åçš„ä¸€è‡´æ€§å’Œæ¸…æ™°åº¦
EOF

    echo "âœ… èªªæ˜æ–‡ä»¶å‰µå»ºå®Œæˆ"
}

# å‰µå»ºç¤ºç¯„æª”æ¡ˆ
create_sample_files() {
    echo "ğŸ“ å‰µå»ºç¤ºç¯„å­è³‡æ–™å¤¾å’Œèªªæ˜..."
    
    # åœ¨ä¸€äº›é‡è¦ç›®éŒ„ä¸­å‰µå»ºç¤ºç¯„å­ç›®éŒ„
    mkdir -p "$BASE_DIR/æŒ‰å¹´ä»½åˆ†é¡/${CURRENT_YEAR}å¹´/æŒ‰æœˆä»½/$(date +%m)æœˆ/æœ¬æœˆé‡è¦æ´»å‹•"
    mkdir -p "$BASE_DIR/æ•™æœƒæ´»å‹•åˆ†é¡/èšæœƒæ´»å‹•/å®‰æ¯æ—¥èšæœƒ/$(date +%Y)å¹´è¨˜éŒ„"
    mkdir -p "$BASE_DIR/æŒ‰å…§å®¹é¡å‹åˆ†é¡/å½±ç‰‡/è¬›é“éŒ„å½±/$(date +%Y)å¹´"
    mkdir -p "$BASE_DIR/æŒ‰éƒ¨é–€åˆ†é¡/é’å¹´åœ˜å¥‘/é’å¹´èšæœƒ/$(date +%Y)å¹´æ´»å‹•"
    
    # å‰µå»ºREADMEæ–‡ä»¶åœ¨é—œéµç›®éŒ„
    echo "# æœ¬æœˆé‡è¦æ´»å‹•æª”æ¡ˆ" > "$BASE_DIR/æŒ‰å¹´ä»½åˆ†é¡/${CURRENT_YEAR}å¹´/æŒ‰æœˆä»½/$(date +%m)æœˆ/æœ¬æœˆé‡è¦æ´»å‹•/README.md"
    echo "è«‹å°‡æœ¬æœˆçš„é‡è¦æ•™æœƒæ´»å‹•å½±éŸ³æª”æ¡ˆä¸Šå‚³è‡³æ­¤ç›®éŒ„" >> "$BASE_DIR/æŒ‰å¹´ä»½åˆ†é¡/${CURRENT_YEAR}å¹´/æŒ‰æœˆä»½/$(date +%m)æœˆ/æœ¬æœˆé‡è¦æ´»å‹•/README.md"
    
    echo "âœ… ç¤ºç¯„æª”æ¡ˆå‰µå»ºå®Œæˆ"
}

# è¨­ç½®æ¬Šé™
set_permissions() {
    echo "ğŸ” è¨­ç½®ç›®éŒ„æ¬Šé™..."
    
    # ç¢ºä¿ç›®éŒ„å¯è®€å¯«
    find "$BASE_DIR" -type d -exec chmod 755 {} \;
    find "$BASE_DIR" -type f -exec chmod 644 {} \;
    
    echo "âœ… æ¬Šé™è¨­ç½®å®Œæˆ"
}

# ä¸»åŸ·è¡Œå‡½æ•¸
main() {
    echo "ğŸš€ é–‹å§‹å»ºç«‹ MemoryArk2 æ•™æœƒå½±éŸ³å›æ†¶éŒ„ç³»çµ±è³‡æ–™å¤¾çµæ§‹"
    echo ""
    
    # æª¢æŸ¥åŸºç¤ç›®éŒ„æ˜¯å¦å­˜åœ¨
    if [ ! -d "uploads" ]; then
        mkdir -p uploads
    fi
    
    # åŸ·è¡Œå„é …å»ºç«‹ä»»å‹™
    create_main_categories
    echo ""
    
    create_church_activities
    echo ""
    
    create_content_types
    echo ""
    
    create_departments
    echo ""
    
    create_special_categories
    echo ""
    
    create_yearly_structure
    echo ""
    
    create_documentation
    echo ""
    
    create_sample_files
    echo ""
    
    set_permissions
    echo ""
    
    echo "ğŸ‰ MemoryArk2 æ•™æœƒå½±éŸ³å›æ†¶éŒ„ç³»çµ±è³‡æ–™å¤¾çµæ§‹å»ºç«‹å®Œæˆï¼"
    echo ""
    echo "ğŸ“Š çµ±è¨ˆè³‡è¨Šï¼š"
    echo "   - ä¸»è¦åˆ†é¡: 5 å€‹"
    echo "   - å­åˆ†é¡: $(find "$BASE_DIR" -type d | wc -l) å€‹ç›®éŒ„"
    echo "   - èªªæ˜æ–‡ä»¶: $(find "$BASE_DIR" -name "*.md" | wc -l) å€‹"
    echo ""
    echo "ğŸ“ è³‡æ–™å¤¾ä½ç½®: $BASE_DIR"
    echo "ğŸ“– ä½¿ç”¨èªªæ˜: $BASE_DIR/ğŸ“– è³‡æ–™å¤¾ä½¿ç”¨èªªæ˜.md"
    echo ""
    echo "âœ¨ ç³»çµ±å·²æº–å‚™å°±ç·’ï¼Œå¯ä»¥é–‹å§‹ä¸Šå‚³æ•™æœƒçš„çè²´å½±éŸ³å›æ†¶ï¼"
}

# åŸ·è¡Œä¸»å‡½æ•¸
main "$@"