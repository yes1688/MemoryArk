{
  "start_time": "2025-06-10T16:59:13.115397",
  "api_base_url": "http://localhost:7001",
  "tests": [
    {
      "test_name": "Health Check",
      "status": "passed",
      "timestamp": "2025-06-10T16:59:13.117272",
      "response": {
        "status_code": 200,
        "headers": {
          "Server": "nginx/1.27.5",
          "Date": "Tue, 10 Jun 2025 08:59:13 GMT",
          "Content-Type": "application/json; charset=utf-8",
          "Content-Length": "99",
          "Connection": "keep-alive",
          "Access-Control-Allow-Credentials": "true",
          "Access-Control-Allow-Headers": "Content-Type, Content-Length, Accept-Encoding, X-CSRF-Token, Authorization, accept, origin, Cache-Control, X-Requested-With",
          "Access-Control-Allow-Methods": "POST, OPTIONS, GET, PUT, DELETE, PATCH",
          "Access-Control-Allow-Origin": "*"
        },
        "elapsed_ms": 1.272
      }
    },
    {
      "test_name": "Auth Status Check",
      "status": "passed",
      "timestamp": "2025-06-10T16:59:13.619547",
      "response": {
        "status_code": 200,
        "headers": {
          "Server": "nginx/1.27.5",
          "Date": "Tue, 10 Jun 2025 08:59:13 GMT",
          "Content-Type": "application/json; charset=utf-8",
          "Content-Length": "321",
          "Connection": "keep-alive",
          "Access-Control-Allow-Credentials": "true",
          "Access-Control-Allow-Headers": "Content-Type, Content-Length, Accept-Encoding, X-CSRF-Token, Authorization, accept, origin, Cache-Control, X-Requested-With",
          "Access-Control-Allow-Methods": "POST, OPTIONS, GET, PUT, DELETE, PATCH",
          "Access-Control-Allow-Origin": "*"
        },
        "elapsed_ms": 1.461
      }
    },
    {
      "test_name": "File List API",
      "status": "failed",
      "error": "HTTPConnectionPool(host='localhost', port=80): Max retries exceeded with url: /api/files/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x773d982c85f0>: Failed to establish a new connection: [Errno 111] Connection refused'))",
      "timestamp": "2025-06-10T16:59:14.121373"
    },
    {
      "test_name": "Categories API",
      "status": "passed",
      "timestamp": "2025-06-10T16:59:14.622927",
      "response": {
        "status_code": 200,
        "headers": {
          "Server": "nginx/1.27.5",
          "Date": "Tue, 10 Jun 2025 08:59:14 GMT",
          "Content-Type": "application/json; charset=utf-8",
          "Content-Length": "51",
          "Connection": "keep-alive",
          "Access-Control-Allow-Credentials": "true",
          "Access-Control-Allow-Headers": "Content-Type, Content-Length, Accept-Encoding, X-CSRF-Token, Authorization, accept, origin, Cache-Control, X-Requested-With",
          "Access-Control-Allow-Methods": "POST, OPTIONS, GET, PUT, DELETE, PATCH",
          "Access-Control-Allow-Origin": "*"
        },
        "elapsed_ms": 1.065
      }
    },
    {
      "test_name": "Response Time Test",
      "status": "passed",
      "timestamp": "2025-06-10T16:59:15.125322",
      "data": {
        "endpoints": [
          {
            "endpoint": "/api/health",
            "response_time_ms": 1.21307373046875,
            "status_code": 200
          },
          {
            "endpoint": "/api/auth/status",
            "response_time_ms": 0.957489013671875,
            "status_code": 200
          }
        ]
      }
    },
    {
      "test_name": "File Upload Test",
      "status": "failed",
      "error": "HTTP 錯誤: 201 - {\"data\":{\"id\":4,\"name\":\"test-upload-1749545955.txt\",\"original_name\":\"test-upload-1749545955.txt\",\"file_path\":\"uploads/files/f2/f109e357-5046-4643-8132-6ffccbed7032\",\"virtual_path\":\"/test-upload-1749545955.txt\",\"sha256_hash\":\"f289739208a71818e9c3e5f632a5592d21982c6ee563f41d8f762722a3498cea\",\"file_size\":1062,\"mime_type\":\"text/plain\",\"thumbnail_url\":\"\",\"parent_id\":null,\"category_id\":null,\"uploaded_by\":1,\"download_count\":0,\"is_directory\":false,\"is_deleted\":false,\"deleted_at\":null,\"deleted_by\":null,\"description\":\"\",\"tags\":\"\",\"content_type\":\"\",\"speaker\":\"\",\"sermon_title\":\"\",\"bible_reference\":\"\",\"like_count\":0,\"created_at\":\"2025-06-10T08:59:15.627963587Z\",\"updated_at\":\"2025-06-10T08:59:15.627963587Z\",\"uploader\":{\"id\":0,\"email\":\"\",\"name\":\"\",\"phone\":\"\",\"role\":\"\",\"status\":\"\",\"avatar_url\":\"\",\"created_at\":\"0001-01-01T00:00:00Z\",\"updated_at\":\"0001-01-01T00:00:00Z\",\"last_login_at\":null,\"approved_by\":null,\"approved_at\":null}},\"message\":\"檔案上傳成功\",\"success\":true}",
      "timestamp": "2025-06-10T16:59:15.653252"
    },
    {
      "test_name": "Large File Upload Test",
      "status": "failed",
      "error": "HTTP 錯誤: 201",
      "timestamp": "2025-06-10T16:59:15.678087"
    },
    {
      "test_name": "Unauthenticated Access: 取得用戶資訊",
      "status": "passed",
      "timestamp": "2025-06-10T16:59:15.680019",
      "response": {
        "status_code": 200,
        "headers": {
          "Server": "nginx/1.27.5",
          "Date": "Tue, 10 Jun 2025 08:59:15 GMT",
          "Content-Type": "application/json; charset=utf-8",
          "Content-Length": "291",
          "Connection": "keep-alive",
          "Access-Control-Allow-Credentials": "true",
          "Access-Control-Allow-Headers": "Content-Type, Content-Length, Accept-Encoding, X-CSRF-Token, Authorization, accept, origin, Cache-Control, X-Requested-With",
          "Access-Control-Allow-Methods": "POST, OPTIONS, GET, PUT, DELETE, PATCH",
          "Access-Control-Allow-Origin": "*"
        }
      },
      "data": {
        "note": "端點開放或開發模式"
      }
    },
    {
      "test_name": "Unauthenticated Access: 檔案列表",
      "status": "failed",
      "error": "HTTPConnectionPool(host='localhost', port=80): Max retries exceeded with url: /api/files/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x773d982ca360>: Failed to establish a new connection: [Errno 111] Connection refused'))",
      "timestamp": "2025-06-10T16:59:15.680820"
    },
    {
      "test_name": "Unauthenticated Access: 檔案上傳",
      "status": "failed",
      "error": "意外的狀態碼: 400",
      "timestamp": "2025-06-10T16:59:15.681466"
    },
    {
      "test_name": "Unauthenticated Access: 分類列表",
      "status": "passed",
      "timestamp": "2025-06-10T16:59:15.682030",
      "response": {
        "status_code": 200,
        "headers": {
          "Server": "nginx/1.27.5",
          "Date": "Tue, 10 Jun 2025 08:59:15 GMT",
          "Content-Type": "application/json; charset=utf-8",
          "Content-Length": "51",
          "Connection": "keep-alive",
          "Access-Control-Allow-Credentials": "true",
          "Access-Control-Allow-Headers": "Content-Type, Content-Length, Accept-Encoding, X-CSRF-Token, Authorization, accept, origin, Cache-Control, X-Requested-With",
          "Access-Control-Allow-Methods": "POST, OPTIONS, GET, PUT, DELETE, PATCH",
          "Access-Control-Allow-Origin": "*"
        }
      },
      "data": {
        "note": "端點開放或開發模式"
      }
    },
    {
      "test_name": "Unauthenticated Access: 建立分類",
      "status": "failed",
      "error": "意外的狀態碼: 400",
      "timestamp": "2025-06-10T16:59:15.682516"
    },
    {
      "test_name": "Unauthenticated Access: 管理員用戶列表",
      "status": "passed",
      "timestamp": "2025-06-10T16:59:15.683239",
      "response": {
        "status_code": 200,
        "headers": {
          "Server": "nginx/1.27.5",
          "Date": "Tue, 10 Jun 2025 08:59:15 GMT",
          "Content-Type": "application/json; charset=utf-8",
          "Content-Length": "348",
          "Connection": "keep-alive",
          "Access-Control-Allow-Credentials": "true",
          "Access-Control-Allow-Headers": "Content-Type, Content-Length, Accept-Encoding, X-CSRF-Token, Authorization, accept, origin, Cache-Control, X-Requested-With",
          "Access-Control-Allow-Methods": "POST, OPTIONS, GET, PUT, DELETE, PATCH",
          "Access-Control-Allow-Origin": "*"
        }
      },
      "data": {
        "note": "端點開放或開發模式"
      }
    },
    {
      "test_name": "Unauthenticated Access: 管理員統計",
      "status": "passed",
      "timestamp": "2025-06-10T16:59:15.683912",
      "response": {
        "status_code": 200,
        "headers": {
          "Server": "nginx/1.27.5",
          "Date": "Tue, 10 Jun 2025 08:59:15 GMT",
          "Content-Type": "application/json; charset=utf-8",
          "Content-Length": "168",
          "Connection": "keep-alive",
          "Access-Control-Allow-Credentials": "true",
          "Access-Control-Allow-Headers": "Content-Type, Content-Length, Accept-Encoding, X-CSRF-Token, Authorization, accept, origin, Cache-Control, X-Requested-With",
          "Access-Control-Allow-Methods": "POST, OPTIONS, GET, PUT, DELETE, PATCH",
          "Access-Control-Allow-Origin": "*"
        }
      },
      "data": {
        "note": "端點開放或開發模式"
      }
    },
    {
      "test_name": "Invalid Auth: 無效 email",
      "status": "failed",
      "error": "意外的回應: 200",
      "timestamp": "2025-06-10T16:59:15.684478"
    },
    {
      "test_name": "Invalid Auth: 空 email",
      "status": "failed",
      "error": "意外的回應: 200",
      "timestamp": "2025-06-10T16:59:15.685036"
    },
    {
      "test_name": "Invalid Auth: 格式錯誤 email",
      "status": "failed",
      "error": "意外的回應: 200",
      "timestamp": "2025-06-10T16:59:15.685540"
    },
    {
      "test_name": "Invalid Auth: 錯誤 header 名稱",
      "status": "failed",
      "error": "意外的回應: 200",
      "timestamp": "2025-06-10T16:59:15.686040"
    },
    {
      "test_name": "Admin Access: 用戶管理",
      "status": "passed",
      "timestamp": "2025-06-10T16:59:15.686549",
      "response": {
        "status_code": 200,
        "headers": {
          "Server": "nginx/1.27.5",
          "Date": "Tue, 10 Jun 2025 08:59:15 GMT",
          "Content-Type": "application/json; charset=utf-8",
          "Content-Length": "348",
          "Connection": "keep-alive",
          "Access-Control-Allow-Credentials": "true",
          "Access-Control-Allow-Headers": "Content-Type, Content-Length, Accept-Encoding, X-CSRF-Token, Authorization, accept, origin, Cache-Control, X-Requested-With",
          "Access-Control-Allow-Methods": "POST, OPTIONS, GET, PUT, DELETE, PATCH",
          "Access-Control-Allow-Origin": "*"
        }
      }
    },
    {
      "test_name": "Admin Access: 系統統計",
      "status": "passed",
      "timestamp": "2025-06-10T16:59:15.687105",
      "response": {
        "status_code": 200,
        "headers": {
          "Server": "nginx/1.27.5",
          "Date": "Tue, 10 Jun 2025 08:59:15 GMT",
          "Content-Type": "application/json; charset=utf-8",
          "Content-Length": "168",
          "Connection": "keep-alive",
          "Access-Control-Allow-Credentials": "true",
          "Access-Control-Allow-Headers": "Content-Type, Content-Length, Accept-Encoding, X-CSRF-Token, Authorization, accept, origin, Cache-Control, X-Requested-With",
          "Access-Control-Allow-Methods": "POST, OPTIONS, GET, PUT, DELETE, PATCH",
          "Access-Control-Allow-Origin": "*"
        }
      }
    },
    {
      "test_name": "Admin Access: 活動日誌",
      "status": "passed",
      "timestamp": "2025-06-10T16:59:15.687657",
      "response": {
        "status_code": 200,
        "headers": {
          "Server": "nginx/1.27.5",
          "Date": "Tue, 10 Jun 2025 08:59:15 GMT",
          "Content-Type": "application/json; charset=utf-8",
          "Content-Length": "80",
          "Connection": "keep-alive",
          "Access-Control-Allow-Credentials": "true",
          "Access-Control-Allow-Headers": "Content-Type, Content-Length, Accept-Encoding, X-CSRF-Token, Authorization, accept, origin, Cache-Control, X-Requested-With",
          "Access-Control-Allow-Methods": "POST, OPTIONS, GET, PUT, DELETE, PATCH",
          "Access-Control-Allow-Origin": "*"
        }
      }
    },
    {
      "test_name": "Admin Access: 修改用戶角色",
      "status": "failed",
      "error": "意外狀態碼: 400",
      "timestamp": "2025-06-10T16:59:15.688131"
    },
    {
      "test_name": "Admin Access: 註冊申請列表",
      "status": "passed",
      "timestamp": "2025-06-10T16:59:15.688661",
      "response": {
        "status_code": 200,
        "headers": {
          "Server": "nginx/1.27.5",
          "Date": "Tue, 10 Jun 2025 08:59:15 GMT",
          "Content-Type": "application/json; charset=utf-8",
          "Content-Length": "89",
          "Connection": "keep-alive",
          "Access-Control-Allow-Credentials": "true",
          "Access-Control-Allow-Headers": "Content-Type, Content-Length, Accept-Encoding, X-CSRF-Token, Authorization, accept, origin, Cache-Control, X-Requested-With",
          "Access-Control-Allow-Methods": "POST, OPTIONS, GET, PUT, DELETE, PATCH",
          "Access-Control-Allow-Origin": "*"
        }
      }
    },
    {
      "test_name": "User Denied: 用戶管理",
      "status": "failed",
      "error": "權限控制失效",
      "timestamp": "2025-06-10T16:59:15.689160"
    },
    {
      "test_name": "User Denied: 系統統計",
      "status": "failed",
      "error": "權限控制失效",
      "timestamp": "2025-06-10T16:59:15.689700"
    },
    {
      "test_name": "Authentication Consistency",
      "status": "passed",
      "timestamp": "2025-06-10T16:59:15.690937",
      "data": {
        "status_codes": [
          200,
          200,
          200
        ],
        "consistent": true
      }
    },
    {
      "test_name": "Header Case: CF-Access-Authenticated-User-Email",
      "status": "passed",
      "timestamp": "2025-06-10T16:59:15.691385",
      "response": {
        "status_code": 200,
        "headers": {
          "Server": "nginx/1.27.5",
          "Date": "Tue, 10 Jun 2025 08:59:15 GMT",
          "Content-Type": "application/json; charset=utf-8",
          "Content-Length": "321",
          "Connection": "keep-alive",
          "Access-Control-Allow-Credentials": "true",
          "Access-Control-Allow-Headers": "Content-Type, Content-Length, Accept-Encoding, X-CSRF-Token, Authorization, accept, origin, Cache-Control, X-Requested-With",
          "Access-Control-Allow-Methods": "POST, OPTIONS, GET, PUT, DELETE, PATCH",
          "Access-Control-Allow-Origin": "*"
        }
      }
    },
    {
      "test_name": "Header Case: cf-access-authenticated-user-email",
      "status": "passed",
      "timestamp": "2025-06-10T16:59:15.691921",
      "response": {
        "status_code": 200,
        "headers": {
          "Server": "nginx/1.27.5",
          "Date": "Tue, 10 Jun 2025 08:59:15 GMT",
          "Content-Type": "application/json; charset=utf-8",
          "Content-Length": "321",
          "Connection": "keep-alive",
          "Access-Control-Allow-Credentials": "true",
          "Access-Control-Allow-Headers": "Content-Type, Content-Length, Accept-Encoding, X-CSRF-Token, Authorization, accept, origin, Cache-Control, X-Requested-With",
          "Access-Control-Allow-Methods": "POST, OPTIONS, GET, PUT, DELETE, PATCH",
          "Access-Control-Allow-Origin": "*"
        }
      }
    },
    {
      "test_name": "Header Case: Cf-Access-Authenticated-User-Email",
      "status": "passed",
      "timestamp": "2025-06-10T16:59:15.692351",
      "response": {
        "status_code": 200,
        "headers": {
          "Server": "nginx/1.27.5",
          "Date": "Tue, 10 Jun 2025 08:59:15 GMT",
          "Content-Type": "application/json; charset=utf-8",
          "Content-Length": "321",
          "Connection": "keep-alive",
          "Access-Control-Allow-Credentials": "true",
          "Access-Control-Allow-Headers": "Content-Type, Content-Length, Accept-Encoding, X-CSRF-Token, Authorization, accept, origin, Cache-Control, X-Requested-With",
          "Access-Control-Allow-Methods": "POST, OPTIONS, GET, PUT, DELETE, PATCH",
          "Access-Control-Allow-Origin": "*"
        }
      }
    },
    {
      "test_name": "Header Case: CF-ACCESS-AUTHENTICATED-USER-EMAIL",
      "status": "passed",
      "timestamp": "2025-06-10T16:59:15.692820",
      "response": {
        "status_code": 200,
        "headers": {
          "Server": "nginx/1.27.5",
          "Date": "Tue, 10 Jun 2025 08:59:15 GMT",
          "Content-Type": "application/json; charset=utf-8",
          "Content-Length": "321",
          "Connection": "keep-alive",
          "Access-Control-Allow-Credentials": "true",
          "Access-Control-Allow-Headers": "Content-Type, Content-Length, Accept-Encoding, X-CSRF-Token, Authorization, accept, origin, Cache-Control, X-Requested-With",
          "Access-Control-Allow-Methods": "POST, OPTIONS, GET, PUT, DELETE, PATCH",
          "Access-Control-Allow-Origin": "*"
        }
      }
    },
    {
      "test_name": "User Registration Flow",
      "status": "failed",
      "error": "註冊被拒絕: {'error': {'code': 'INVALID_REQUEST', 'details': \"Key: 'RegisterRequest.Phone' Error:Field validation for 'Phone' failed on the 'required' tag\", 'message': '請求格式不正確'}, 'success': False}",
      "timestamp": "2025-06-10T16:59:15.693375"
    },
    {
      "test_name": "Malformed Request: Invalid JSON Body",
      "status": "passed",
      "timestamp": "2025-06-10T16:59:15.695642"
    },
    {
      "test_name": "Malformed Request: Missing Content-Type",
      "status": "failed",
      "error": "預期狀態碼 400，實際 201",
      "timestamp": "2025-06-10T16:59:15.699971"
    },
    {
      "test_name": "Malformed Request: Empty Request Body",
      "status": "passed",
      "timestamp": "2025-06-10T16:59:15.700460"
    },
    {
      "test_name": "Malformed Request: Oversized Request Body",
      "status": "passed",
      "timestamp": "2025-06-10T16:59:15.704317"
    },
    {
      "test_name": "Path Traversal: ../../../etc/passwd...",
      "status": "failed",
      "error": "意外回應: 201",
      "timestamp": "2025-06-10T16:59:15.708559"
    },
    {
      "test_name": "Path Traversal: ..\\..\\..\\windows\\sys...",
      "status": "failed",
      "error": "意外回應: 201",
      "timestamp": "2025-06-10T16:59:15.712845"
    },
    {
      "test_name": "Path Traversal: /etc/passwd...",
      "status": "failed",
      "error": "意外回應: 201",
      "timestamp": "2025-06-10T16:59:15.717284"
    },
    {
      "test_name": "Path Traversal: ../../../../usr/bin/...",
      "status": "failed",
      "error": "意外回應: 201",
      "timestamp": "2025-06-10T16:59:15.721666"
    },
    {
      "test_name": "Path Traversal: ..%2F..%2F..%2Fetc%2...",
      "status": "failed",
      "error": "意外回應: 201",
      "timestamp": "2025-06-10T16:59:15.726164"
    },
    {
      "test_name": "Path Traversal: ....//....//....//et...",
      "status": "failed",
      "error": "意外回應: 201",
      "timestamp": "2025-06-10T16:59:15.730540"
    },
    {
      "test_name": "Path Traversal: ..\\..\\..\\..\\..\\..\\.....",
      "status": "failed",
      "error": "意外回應: 201",
      "timestamp": "2025-06-10T16:59:15.734823"
    },
    {
      "test_name": "SQL Injection: '; DROP TABLE users;...",
      "status": "passed",
      "timestamp": "2025-06-10T16:59:15.735711"
    },
    {
      "test_name": "SQL Injection: 1' OR '1'='1...",
      "status": "passed",
      "timestamp": "2025-06-10T16:59:15.736260"
    },
    {
      "test_name": "SQL Injection: admin'--...",
      "status": "passed",
      "timestamp": "2025-06-10T16:59:15.736868"
    },
    {
      "test_name": "SQL Injection: 1' UNION SELECT * FR...",
      "status": "passed",
      "timestamp": "2025-06-10T16:59:15.737395"
    },
    {
      "test_name": "SQL Injection: '; INSERT INTO users...",
      "status": "passed",
      "timestamp": "2025-06-10T16:59:15.737912"
    },
    {
      "test_name": "Concurrent Requests Test",
      "status": "passed",
      "timestamp": "2025-06-10T16:59:15.743276",
      "data": {
        "concurrent_requests": 10,
        "successful": 10,
        "failed": 0,
        "elapsed_time": 0.00526738166809082,
        "success_rate": 1.0
      }
    },
    {
      "test_name": "Large Pagination Request",
      "status": "failed",
      "error": "HTTPConnectionPool(host='localhost', port=80): Max retries exceeded with url: /api/files/?limit=999999&page=1 (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x773d982ca030>: Failed to establish a new connection: [Errno 111] Connection refused'))",
      "timestamp": "2025-06-10T16:59:15.744078"
    },
    {
      "test_name": "Invalid Upload: Empty File",
      "status": "failed",
      "error": "意外狀態碼: 201",
      "timestamp": "2025-06-10T16:59:15.748985"
    },
    {
      "test_name": "Invalid Upload: Extremely Long Filename",
      "status": "failed",
      "error": "意外狀態碼: 201",
      "timestamp": "2025-06-10T16:59:15.753228"
    },
    {
      "test_name": "Invalid Upload: Special Characters in Filename",
      "status": "failed",
      "error": "意外狀態碼: 201",
      "timestamp": "2025-06-10T16:59:15.757195"
    },
    {
      "test_name": "Invalid Upload: Null Bytes in Filename",
      "status": "passed",
      "timestamp": "2025-06-10T16:59:15.757830"
    },
    {
      "test_name": "Rate Limiting Test",
      "status": "passed",
      "timestamp": "2025-06-10T16:59:20.816840",
      "data": {
        "total_requests": 50,
        "successful": 50,
        "rate_limited": 0,
        "rate_limiting_active": false
      }
    }
  ],
  "summary": {
    "total": 54,
    "passed": 28,
    "failed": 26,
    "skipped": 0
  },
  "end_time": "2025-06-10T16:59:20.816914"
}